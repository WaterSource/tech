### 企鹅电竞

海外，做了一套基础题

* NSObject的缺省实现
	* init
	* performSelector:
	* isKindOfClass
	* isMemberOfClass
* `#import``#include``@class`
	* import和include功能性一样，import优化了重复引用交叉编译的问题
* `#import<>``#import""`
* 静态库、动态库
	* 两者都可以是framework
	* 在创建工程时可以选择不同的封装类型，在build-setting可以切换

* push和present的区别
	* push可以返回到栈的任意一级
	* present只能逐级返回
* arc的优缺点
	* 缺点 循环引用?
	
* 项目中tcp的超时重发

### 商汤

#### 一轮

移动事业群，室内3Dar导航

* hybrid中jsBridge的实现及优化

* tcp遇到的问题
	
	* 发送消息的状态
	* 会话列表的卡顿
		* 未读数
		* 刷新频率

* arc
* gcd
	* gcd任务的取消

	```
	dispatch_queue_t queue;
	
	dispatch_t block1 = dispatch_block_create(0, ^{
		// ...
	});
	
	dispatch_async(queue, block1);
	dispatch_block_cancel(block1);
	```

#### 二轮

* 线上Crash的解决过程
	* tcp发送消息的问题
* Hybird中与Web的交互实现
* Native和Unity的跨平台交互
* Runtime的实际使用案例
	* 关联对象，关联方法

#### 三轮

* 触摸事件响应链

* runloop

* UIWindow和UIView的关系

### 迅雷

#### 一轮

* -排序原理
	* 快排
		* 实际步骤原理
		* 时间复杂度上，会因为特定顺序，变的更为复杂
	* 归并
* -TopK
* ARC对于autorelease的具体影响
	* 具体表现为临时变量的实际释放时机
	* 函数返回值赋值给临时变量
	* 答: arc下，栈上的变量不会进入pool
* Timer的使用上需要注意的问题
	* runloopMode的选择
	* 需要在合适时机手动暂停，释放
	* 为什么会有循环引用
		* timer的target本身会持有self，如果再强引用timer就会造成循环引用不释放的问题
* 多线程
	
* 锁的种类
	* -自旋的实际例子
		* SpinLock 自旋锁会导致等待线程处于忙等的状态，一直处于循环等待的状态;不会进行线程调度；
		* 互斥锁中等待的线程会进入休眠；
		* synchronized是对NSLock(互斥)的封装；
* sql的名词解释
	* 事务
	* 索引
* 项目经验
	* 网页请求拦截的具体实现

#### 二轮

* 二叉树
	* 创建二叉树
	* 查找二叉树的最小节点

#### 三轮

* http多路复用 相比1.0及1.1的优化体现在哪
* http什么类型的请求会被缓存

* oom(内存溢出 out of memory)，怎么定位，怎么处理

* `100*100`的bitmap占用多大内存
	* `100*100*4/1024 ≈ 39KB`
* 千万数量级的字符串，做查询
	* 布隆过滤器
* 数据库大量读写的优化
	* 写入更新的事务化
	* 建立索引
		* `Create Index`
* 链表的相交点

### 搞定2轮

####项目经验

1.网页加速的实践过程

浏览器的常驻
请求返回缓存
离线包 强制下发

2.应用优化

启动优化、卡顿优化

3.动态库和静态库的差异

4.什么时候使用静态库

5.如何统计应用的卡顿情况

统计，runloop

6.runloop怎么实现休眠状态的唤醒

猜测是回答系统响应链，硬件在接受到事件之后会生成IOHIDEvent事件，事件会传递到`SpringBoard`，`SpringBoard`会下发到当前正在运行的App进程，触发`Source1`事件，`runloop`唤醒。

7.view的展示 渲染原理

8.三方库源码熟悉程度

9.商城数据结构上处理的优秀的内容

下载调度器，

10.怎样设计一个SDK
底层、逻辑层、应用层
接口分离，参数分离

深圳团队的项目是
ppt工具 海外项目

### 稿定

iOS架构负责，dau 双端分别30w

#### IM

1.丢包的情况怎么处理

* 超时 + 重传（重发机制）+ 确认（ack回包）
* 本地id+服务端id作为唯一标识，去重

2.数据库的表单设计

消息、会话、用户、系统活动消息

-2.1消息的分表 如何设计
如果涉及到消息查找 分表如何查找

3.消息具体读写的实现
读写分流
socket库内部的串行队列？

-4.model和mv的同步 怎么通知上层刷新

5.大量未读消息 怎么存储，怎么刷新UI

* 先拉取未读计数
* 未读消息采用分页获取未读消息
	* 服务端收到请求会把上一页的消息置为已读，最后一页可以是返回空消息，方便服务器状态调整
* 

-6.网络不连续 大端小端 
针对流 mac window的不同二进制解析

#### UI

-1.100M的图片展示
SD内的coder方法

2.sd存在沙盒的文件名怎么生成

url+md5

3.tableview

3.1自定义实现复用的情况下，怎样设计复用池的数据结构（针对不同样式的cell）

```
[_visibleCells(NSMutableDictionary) setObject:cell forKey:indexPath]
[_cacheCells(NSMutableDictionary) setObject:[cells] forKey:identifier]
[_reusableCells(NSMutableSet) addObject:cell]
```

3.2能怎么实现滚动检测

scrollview代理

KVO监听contentOffset

4.uiwebview wkwebview 的区别(内核)

* iOS8出现wk，iOS9稳定

#### 组件化

测试发布流程

* 组件demo测试通过
* 客户端接入测试通过

组件遇到问题

* 优先让项目自查，检查日志，确定问题范围
* 如果是组件问题，将场景纳入demo；
* 如果是项目调用导致，增加容错机制；
* 更新文档

组件包含不可见源码库的错误维护

* 检查日志
* 打点增加额外的信息，打印、日志上报

如何减少横向依赖

* subspeacs


### fdd

RESTful API

复杂UI

1. NSThread 常驻线程的实现
2. bad access的原因
3. swift 的类 和结构体 的区别
4. 后序遍历 的实现方式
5. 深拷贝 的实现
6. iOS13 新特性
7. block的拷贝情况

