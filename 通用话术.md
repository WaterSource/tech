### 自我介绍

从毕业开始一直专注于iOS移动应用的开发，至今已经有五年了。刚进入美图的时候加入的是闪聊这个项目组，负责IM通信模块，我主要是负责TCP通道的链接，消息的接收管理，会话的维护。

后面也把整个IM功能组件化了，在后面的Whee和Bee项目上实现了快速的接入。

然后在去年年中的时候，我们就开始了商业化也就是有颜商城的这个项目。公司挺看重这个项目的，给我们倾斜了不少资源。经过了几次迭代，在美颜相机、美图秀秀这几个公司的热门产品上有些不错的成绩。我主要是负责项目里的数据结构设计和数据维护，也做了一些对网页的加载优化。

### 闪聊的一些情况

闪聊其实在上线初期就有很大的外部压力，据传腾讯内部又对我们专门开会讨论。很多宣发渠道都对我们不怎么友好，导致后续的宣传活动不是很理想。

#### 为什么要换工作

虽然我们现在的项目是公司的核心项目，公司也倾斜了很多资源，项目的表现也很好在美颜秀秀美拍都有不错的成绩。公司的股价一直也上不去，公司运作的不好。想换个更好的平台发展。(高层也出现过一些变动，团队的leader)（公司leader也在这里，他觉得这里挺好的，喊我过来试试）

#### 职业规划

中期规划，长期规划

#### 管理的经验

在最近的商业化项目中，有协助项目管理承担一些项目管理方向的工作；

敏捷开发

* 前期
	* 和产品讨论需求的可行性，针对比较大的功能点会考虑能不能分版本开发或者是一些更好更快的实现方式；
	* 然后就是对需求的模块拆分，会对每个需求模块设定一个主要负责人和次要负责人；
	* 对需求的进一步细化，制定排期，会安排多人评估同一个需求，确保评估时间的合理性；
	* 所有排期输出之后，整体观察，有没有依赖项的调整空间；

* 中期
	* 实时的观测项目进度，及时发现风险，并协调解决问题；
	* 使用工具跟进每天的开发进度，每天也有晨会同步团队进度；
* 后期
	* review，对这一次开发周期做一个简单的总结，回顾一下有没有可以可以继续优化的部分，优化整体的效率，提高下一个周期的执行效率；

#### 薪资

50w年包，美图的薪资水平在行业里偏低，本身喜欢现在这个团队，所以这几年也没有出来找过机会。

#### 团队规模

客户端规模是12人，两端各6人；

#### 性能优化

会话列表卡顿，启动时间1s内。

消息的顺序、及时性、表的设计结构

### IM

做过的优化

IM会话列表的滑动优化

	* 群会话的头像，实时拼接 -> 缓存拼接图片
		根据前4用户的头像地址为key，缓存群头像	
	* 未读数的结构优化

遇到的问题
		
	* 数据库 realm realm对象都是文件数据的一份拷贝 不能跨线程调用 导致大量crash


###有颜商城

* 客户端原生和网页共建的商城
	* 加速网页的加载速度 (Hybrid)
		* 打印出网页加载的各个阶段的加载用时
			* window.performanceTiming(webkit js)
			* JS的返回类型转换
				`JSON.stringify(window.performance.timing.toJSON())`
			* DNS查询耗时、TCP连接耗时、Request请求耗时、解析dom耗时、白屏时间、dom ready时间、dom load时间、总时间
			* 初始化webview->请求页面->下载数据->解析html->请求js/css资源->dom渲染->解析js执行->js请求数据->解析渲染->下载渲染图片
		* 提前初始化浏览器，浏览器回收池
		* 提前加载网页，产生缓存【因为用户的使用习惯，放弃】
		* (未使用的)离线包缓存策略
* JavaScript（MTJS）
* 相机和网页的同页面嵌套
	* 相机有使用到美颜，会消耗大量计算资源；有影响浏览器的滚动流畅性；


###Bee

U3D，虚拟形象，视频聊天，直播

* 视频聊天(声网)


###Whee

OpenGL/Unity，虚拟形象，视频聊天

* RAC (ReactiveCocoa)
	
* iOS和U3D通信
	* 调用方声明接口api(C#)，被调用方实现接口，通过函数指针相互调用；客户端调用生成递增id，对应客户端回调结构体，实现被调用后的回调；
	* 【U3D调用客户端】Unity通过 声明public static extern 全局静态方法接口，客户端去实现该函数接口，从而去获取C#的函数指针，保存在iOSUnityProxy这个单例中。
	* 【客户端调用U3D】客户端通过调用iOSUnityProxy保存的函数指针，去调用Unity的接口。
